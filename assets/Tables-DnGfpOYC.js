import{d as w,u as Re,r as i,m as $e,O as De,Q as Y,s as l,j as e,U as Z,e as Ie,X as qe,S as Le,V as Be,f as $,Y as Ge,Z as He,_ as Ve,$ as Ue,a0 as Qe,w as Xe,a1 as J,a2 as Ye,a3 as Ze,a4 as K,a5 as W,y as Je,v as Ke}from"./index-Cjb8kro6.js";import{M as j}from"./Modal-Cfe-xpKF.js";import{P as We}from"./plus-CGoxE8aw.js";import{C as es}from"./calendar-oVHKLrFz.js";import{P as ss}from"./pen-3htcqnFF.js";import{C as as}from"./clock-DGJr6FEA.js";import{A as ts}from"./arrow-right-C0aLgac4.js";import{B as D}from"./banknote-DmSQR9-J.js";import{G as ee}from"./globe-xOWdLTPB.js";const ns=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],I=w("link-2",ns);const rs=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ls=w("phone",rs);const is=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],os=w("split",is);const cs=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ds=w("square-check-big",cs);const ms=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],xs=w("square",ms);function ys(){const se=Re(),[g,ae]=i.useState([]),[C,te]=i.useState([]),[q,ne]=i.useState([]),[re,le]=i.useState(!0),[b,ie]=i.useState(new Date().toISOString().split("T")[0]),[oe,S]=i.useState(!1),[ce,_]=i.useState(!1),[de,T]=i.useState(!1),[me,N]=i.useState(!1),[xe,P]=i.useState(!1),[he,M]=i.useState(!1),[ue,A]=i.useState(!1),[E,L]=i.useState(null),[B,pe]=i.useState(null),[t,je]=i.useState(null),[O,ge]=i.useState([]),[G,H]=i.useState([]),[f,V]=i.useState(0),[p,z]=i.useState({name:"",capacity:"4"}),[x,F]=i.useState({covers:"2",customer_name:"",customer_phone:""}),[m,y]=i.useState({method:"cash",smac:!1}),[d,v]=i.useState({amount:"",method:"cash",notes:""}),[n,h]=i.useState({table_id:0,table_ids:[],date:new Date().toISOString().split("T")[0],time:"19:00",customer_name:"",phone:"",guests:"2",notes:""});i.useEffect(()=>{u()},[b]);async function u(){try{const[s,a,r]=await Promise.all([$e(),De(b),Y()]);ae(s),te(a),ne(r)}catch(s){console.error("Error loading data:",s),l("Errore nel caricamento dati","error")}finally{le(!1)}}function k(s){return q.some(o=>o.table_id===s)?"occupied":C.some(o=>o.table_id===s&&o.status==="confirmed")?"reserved":"available"}function U(s){return q.find(a=>a.table_id===s)}function be(s){return C.find(a=>(a.table_ids||[a.table_id]).includes(s)&&a.status==="confirmed")}function Q(s){s?(L(s),z({name:s.name,capacity:s.capacity.toString()})):(L(null),z({name:"",capacity:"4"})),S(!0)}function ve(s){h({...n,table_id:s,table_ids:[s],date:b}),_(!0)}function Ne(s){h(a=>{const r=a.table_ids||[];if(r.includes(s)){const c=r.filter(R=>R!==s);return{...a,table_ids:c.length>0?c:[s],table_id:c.length>0?c[0]:s}}else return{...a,table_ids:[...r,s],table_id:a.table_id||s}})}function fe(){const s=n.table_ids||[];return g.filter(a=>s.includes(a.id)).reduce((a,r)=>a+r.capacity,0)}async function ye(){if(!p.name.trim()){l("Inserisci un nome per il tavolo","warning");return}try{const s={name:p.name.trim(),capacity:parseInt(p.capacity)||4};E?(await Ve(E.id,s),l("Tavolo aggiornato","success")):(await Ue(s),l("Tavolo creato","success")),S(!1),u()}catch(s){console.error("Error saving table:",s),l("Errore nel salvataggio","error")}}async function ke(s){if(confirm("Sei sicuro di voler eliminare questo tavolo?"))try{await Ge(s),l("Tavolo eliminato","success"),u()}catch(a){console.error("Error deleting table:",a),l("Errore nell'eliminazione","error")}}async function we(){if(!n.customer_name.trim()){l("Inserisci il nome del cliente","warning");return}if(n.table_ids.length===0){l("Seleziona almeno un tavolo","warning");return}try{await Qe({table_id:n.table_ids[0],table_ids:n.table_ids,date:n.date,time:n.time,customer_name:n.customer_name.trim(),phone:n.phone,guests:parseInt(n.guests)||2,notes:n.notes||void 0,status:"confirmed"}),l("Prenotazione creata","success"),_(!1),h({table_id:0,table_ids:[],date:b,time:"19:00",customer_name:"",phone:"",guests:"2",notes:""}),u()}catch(s){console.error("Error creating reservation:",s),l("Errore nella creazione","error")}}async function Ce(s){if(confirm("Annullare questa prenotazione?"))try{await He(s),l("Prenotazione annullata","success"),u()}catch(a){console.error("Error cancelling reservation:",a),l("Errore nell'annullamento","error")}}function X(s){const a=k(s),r=U(s);a==="occupied"&&r?Se(r):a==="available"&&(pe(s),F({covers:"2",customer_name:"",customer_phone:""}),T(!0))}async function Se(s){try{await Je(s.id);const[a,r,o]=await Promise.all([Ke(s.id),K(s.id),W(s.id)]),R=(await Y()).find(Oe=>Oe.id===s.id);je(R||s),ge(a),H(r),V(o),N(!0)}catch(a){console.error("Error loading session details:",a),l("Errore nel caricamento dettagli","error")}}async function _e(){if(B)try{await Xe(B,parseInt(x.covers)||1,x.customer_name||void 0,x.customer_phone||void 0),l("Conto aperto","success"),T(!1),u()}catch(s){console.error("Error opening session:",s),l("Errore nell'apertura conto","error")}}function Te(){t&&se(`/orders/new?table=${t.table_id}&session=${t.id}`)}async function Pe(){t&&(y({method:"cash",smac:!1}),M(!0))}async function Me(){if(t)try{await J(t.id,m.method,m.smac),l("Conto chiuso","success"),M(!1),N(!1),u()}catch(s){console.error("Error closing session:",s),l("Errore nella chiusura","error")}}function Ae(){t&&P(!0)}async function Ee(s){if(t)try{await Ye(t.id,s),l("Tavolo trasferito","success"),P(!1),N(!1),u()}catch(a){console.error("Error transferring table:",a),l("Errore nel trasferimento","error")}}function ze(){t&&(v({amount:"",method:"cash",notes:""}),A(!0))}async function Fe(){if(!t)return;const s=parseFloat(d.amount);if(isNaN(s)||s<=0){l("Inserisci un importo valido","warning");return}if(s>f){l("Importo superiore al rimanente","warning");return}try{await Ze(t.id,s,d.method,d.notes||void 0);const[a,r]=await Promise.all([K(t.id),W(t.id)]);H(a),V(r),v({amount:"",method:"cash",notes:""}),l("Pagamento aggiunto","success"),r<=0&&(await J(t.id,"split",!1),l("Conto saldato e chiuso","success"),A(!1),N(!1),u())}catch(a){console.error("Error adding payment:",a),l("Errore nell'aggiunta pagamento","error")}}return re?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Tavoli"}),e.jsx("p",{className:"text-dark-400 mt-1",children:"Gestisci tavoli e prenotazioni"})]}),e.jsxs("button",{onClick:()=>Q(),className:"btn-primary",children:[e.jsx(We,{className:"w-5 h-5"}),"Nuovo Tavolo"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(es,{className:"w-5 h-5 text-dark-400"}),e.jsx("input",{type:"date",value:b,onChange:s=>ie(s.target.value),className:"input w-auto"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-emerald-500"}),e.jsx("span",{className:"text-sm text-dark-300",children:"Disponibile"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-red-500"}),e.jsx("span",{className:"text-sm text-dark-300",children:"Occupato"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-amber-500"}),e.jsx("span",{className:"text-sm text-dark-300",children:"Prenotato"})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:g.map(s=>{const a=k(s.id),r=U(s.id),o=be(s.id);return e.jsxs("div",{onClick:()=>X(s.id),className:`
                group relative
                ${a==="available"?"table-available cursor-pointer hover:scale-105":""}
                ${a==="occupied"?"table-occupied cursor-pointer hover:scale-105":""}
                ${a==="reserved"?"table-reserved":""}
                p-4 transition-transform
              `,children:[e.jsx("h3",{className:"text-lg font-bold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:s.capacity})]}),r&&e.jsxs("div",{className:"mt-2 text-xs space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"}),r.covers," coperti"]}),e.jsxs("p",{className:"font-semibold text-lg",children:["€",r.total.toFixed(2)]}),r.customer_name&&e.jsx("p",{className:"truncate",children:r.customer_name})]}),o&&!r&&e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsx("p",{className:"truncate",children:o.customer_name}),e.jsx("p",{children:o.time}),o.table_ids&&o.table_ids.length>1&&e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-amber-400",children:[e.jsx(I,{className:"w-3 h-3"}),e.jsxs("span",{children:[o.table_ids.length," tavoli"]})]})]}),a==="available"&&e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),X(s.id)},className:"text-xs font-medium text-emerald-400 hover:text-emerald-300",children:"Apri Conto"}),e.jsx("button",{onClick:c=>{c.stopPropagation(),ve(s.id)},className:"block text-xs underline hover:no-underline",children:"Prenota"})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),Q(s)},className:"p-1 bg-dark-800 rounded hover:bg-dark-700",children:e.jsx(ss,{className:"w-3 h-3"})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),ke(s.id)},className:"p-1 bg-dark-800 rounded hover:bg-red-500/20",children:e.jsx(Ie,{className:"w-3 h-3"})})]})]},s.id)})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h2",{className:"font-semibold text-white",children:["Prenotazioni per ",new Date(b).toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long"})]})}),e.jsx("div",{className:"card-body",children:C.length===0?e.jsx("p",{className:"text-dark-400 text-center py-4",children:"Nessuna prenotazione per questa data"}):e.jsx("div",{className:"space-y-3",children:C.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-900 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary-500/20 flex items-center justify-center",children:e.jsx(as,{className:"w-6 h-6 text-primary-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:s.customer_name}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-dark-400",children:[e.jsx("span",{children:s.time}),e.jsx("span",{children:s.table_name}),e.jsxs("span",{children:[s.guests," ospiti"]})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-dark-400",children:[e.jsx(ls,{className:"w-3 h-3"}),s.phone]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`badge ${s.status==="confirmed"?"badge-success":"badge-danger"}`,children:s.status==="confirmed"?"Confermata":"Annullata"}),s.status==="confirmed"&&e.jsx("button",{onClick:()=>Ce(s.id),className:"p-2 hover:bg-red-500/20 rounded-lg transition-colors",children:e.jsx(qe,{className:"w-5 h-5 text-red-400"})})]})]},s.id))})})]}),e.jsx(j,{isOpen:oe,onClose:()=>S(!1),title:E?"Modifica Tavolo":"Nuovo Tavolo",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Nome Tavolo"}),e.jsx("input",{type:"text",value:p.name,onChange:s=>z({...p,name:s.target.value}),className:"input",placeholder:"Es. Tavolo 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Capacità (posti)"}),e.jsx("input",{type:"number",min:"1",value:p.capacity,onChange:s=>z({...p,capacity:s.target.value}),className:"input"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsx("button",{onClick:ye,className:"btn-primary flex-1",children:E?"Salva":"Crea"}),e.jsx("button",{onClick:()=>S(!1),className:"btn-secondary",children:"Annulla"})]})]})}),e.jsx(j,{isOpen:ce,onClose:()=>_(!1),title:"Nuova Prenotazione",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Data"}),e.jsx("input",{type:"date",value:n.date,onChange:s=>h({...n,date:s.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Ora"}),e.jsx("input",{type:"time",value:n.time,onChange:s=>h({...n,time:s.target.value}),className:"input"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Nome Cliente *"}),e.jsx("input",{type:"text",value:n.customer_name,onChange:s=>h({...n,customer_name:s.target.value}),className:"input",placeholder:"Nome e cognome"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Telefono"}),e.jsx("input",{type:"tel",value:n.phone,onChange:s=>h({...n,phone:s.target.value}),className:"input",placeholder:"+39..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Ospiti"}),e.jsx("input",{type:"number",min:"1",value:n.guests,onChange:s=>h({...n,guests:s.target.value}),className:"input"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"label mb-0",children:[e.jsx(I,{className:"w-4 h-4 inline mr-1"}),"Tavoli"]}),e.jsxs("span",{className:"text-xs text-dark-400",children:["Capacità totale: ",e.jsx("span",{className:"text-primary-400 font-semibold",children:fe()})," posti"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto p-2 bg-dark-900 rounded-xl",children:g.map(s=>{const a=n.table_ids.includes(s.id),o=k(s.id)==="available";return e.jsxs("button",{type:"button",onClick:()=>o&&Ne(s.id),disabled:!o,className:`p-2 rounded-lg border-2 text-sm flex items-center gap-2 transition-all ${a?"border-primary-500 bg-primary-500/10 text-white":o?"border-dark-600 text-dark-300 hover:border-dark-500":"border-dark-700 text-dark-500 opacity-50 cursor-not-allowed"}`,children:[a?e.jsx(ds,{className:"w-4 h-4 text-primary-400"}):e.jsx(xs,{className:"w-4 h-4"}),e.jsx("span",{className:"flex-1 text-left truncate",children:s.name}),e.jsxs("span",{className:"text-xs text-dark-400",children:[s.capacity,"p"]})]},s.id)})}),n.table_ids.length>1&&e.jsxs("p",{className:"text-xs text-primary-400 mt-2 flex items-center gap-1",children:[e.jsx(I,{className:"w-3 h-3"}),"Tavoli uniti: ",g.filter(s=>n.table_ids.includes(s.id)).map(s=>s.name).join(" + ")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Note"}),e.jsx("textarea",{value:n.notes,onChange:s=>h({...n,notes:s.target.value}),className:"input resize-none h-20",placeholder:"Note aggiuntive..."})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsx("button",{onClick:we,className:"btn-primary flex-1",children:"Crea Prenotazione"}),e.jsx("button",{onClick:()=>_(!1),className:"btn-secondary",children:"Annulla"})]})]})}),e.jsx(j,{isOpen:de,onClose:()=>T(!1),title:"Apri Conto",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Numero Coperti"}),e.jsx("input",{type:"number",min:"1",value:x.covers,onChange:s=>F({...x,covers:s.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Nome Cliente (opzionale)"}),e.jsx("input",{type:"text",value:x.customer_name,onChange:s=>F({...x,customer_name:s.target.value}),className:"input",placeholder:"Es. Marco Rossi"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Telefono (opzionale)"}),e.jsx("input",{type:"tel",value:x.customer_phone,onChange:s=>F({...x,customer_phone:s.target.value}),className:"input",placeholder:"+39..."})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsx("button",{onClick:_e,className:"btn-primary flex-1",children:"Apri Conto"}),e.jsx("button",{onClick:()=>T(!1),className:"btn-secondary",children:"Annulla"})]})]})}),e.jsx(j,{isOpen:me,onClose:()=>N(!1),title:`Conto ${t?.table_name||""}`,size:"lg",children:t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-dark-900 rounded-xl",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Coperti"}),e.jsx("p",{className:"text-xl font-bold text-white",children:t.covers})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Comande"}),e.jsx("p",{className:"text-xl font-bold text-white",children:O.length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Totale"}),e.jsxs("p",{className:"text-xl font-bold text-primary-400",children:["€",t.total.toFixed(2)]})]})]}),t.customer_name&&e.jsxs("p",{className:"text-dark-400",children:["Cliente: ",e.jsx("span",{className:"text-white",children:t.customer_name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-3",children:"Comande"}),O.length===0?e.jsx("p",{className:"text-dark-400 text-center py-4",children:"Nessuna comanda ancora"}):e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:O.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-900 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-white",children:["Comanda #",s.order_number||1]}),e.jsx("span",{className:`ml-2 badge ${s.status==="pending"?"badge-warning":s.status==="preparing"?"badge-info":s.status==="ready"?"badge-success":"badge-secondary"}`,children:s.status==="pending"?"In attesa":s.status==="preparing"?"In preparazione":s.status==="ready"?"Pronto":s.status==="delivered"?"Consegnato":s.status})]}),e.jsxs("span",{className:"font-semibold text-white",children:["€",s.total.toFixed(2)]})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:Te,className:"btn-primary flex items-center justify-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),"Aggiungi Comanda"]}),e.jsxs("button",{onClick:Ae,className:"btn-secondary flex items-center justify-center gap-2",children:[e.jsx(ts,{className:"w-4 h-4"}),"Trasferisci"]}),e.jsxs("button",{onClick:ze,className:"btn-secondary flex items-center justify-center gap-2",children:[e.jsx(os,{className:"w-4 h-4"}),"Dividi Conto"]}),e.jsxs("button",{onClick:Pe,className:"btn-primary bg-emerald-600 hover:bg-emerald-700 flex items-center justify-center gap-2",disabled:t.total===0,children:[e.jsx(Be,{className:"w-4 h-4"}),"Chiudi Conto"]})]})]})}),e.jsx(j,{isOpen:he,onClose:()=>M(!1),title:"Chiudi Conto",size:"sm",children:t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center p-4 bg-dark-900 rounded-xl",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Totale da pagare"}),e.jsxs("p",{className:"text-3xl font-bold text-primary-400",children:["€",t.total.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Metodo di Pagamento"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>y({...m,method:"cash"}),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-colors ${m.method==="cash"?"border-primary-500 bg-primary-500/10":"border-dark-700 hover:border-dark-600"}`,children:[e.jsx(D,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Contanti"})]}),e.jsxs("button",{onClick:()=>y({...m,method:"card"}),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-colors ${m.method==="card"?"border-primary-500 bg-primary-500/10":"border-dark-700 hover:border-dark-600"}`,children:[e.jsx($,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Carta"})]}),e.jsxs("button",{onClick:()=>y({...m,method:"online"}),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-colors ${m.method==="online"?"border-primary-500 bg-primary-500/10":"border-dark-700 hover:border-dark-600"}`,children:[e.jsx(ee,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Online"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"smac",checked:m.smac,onChange:s=>y({...m,smac:s.target.checked}),className:"w-5 h-5 rounded border-dark-600 bg-dark-800 text-primary-500 focus:ring-primary-500"}),e.jsx("label",{htmlFor:"smac",className:"text-white",children:"SMAC passato"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsx("button",{onClick:Me,className:"btn-primary flex-1",children:"Conferma Pagamento"}),e.jsx("button",{onClick:()=>M(!1),className:"btn-secondary",children:"Annulla"})]})]})}),e.jsx(j,{isOpen:xe,onClose:()=>P(!1),title:"Trasferisci Tavolo",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-dark-400",children:"Seleziona il nuovo tavolo:"}),e.jsx("div",{className:"grid grid-cols-3 gap-3 max-h-64 overflow-y-auto",children:g.filter(s=>s.id!==t?.table_id&&k(s.id)==="available").map(s=>e.jsxs("button",{onClick:()=>Ee(s.id),className:"p-4 bg-dark-900 rounded-xl hover:bg-dark-800 transition-colors text-center",children:[e.jsx("p",{className:"font-semibold text-white",children:s.name}),e.jsxs("p",{className:"text-sm text-dark-400",children:[s.capacity," posti"]})]},s.id))}),g.filter(s=>s.id!==t?.table_id&&k(s.id)==="available").length===0&&e.jsx("p",{className:"text-center text-dark-400 py-4",children:"Nessun tavolo libero disponibile"}),e.jsx("button",{onClick:()=>P(!1),className:"btn-secondary w-full",children:"Annulla"})]})}),e.jsx(j,{isOpen:ue,onClose:()=>A(!1),title:"Dividi Conto",size:"md",children:t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-dark-900 rounded-xl",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Totale"}),e.jsxs("p",{className:"text-lg font-bold text-white",children:["€",t.total.toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Pagato"}),e.jsxs("p",{className:"text-lg font-bold text-emerald-400",children:["€",(t.total-f).toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Rimanente"}),e.jsxs("p",{className:"text-lg font-bold text-primary-400",children:["€",f.toFixed(2)]})]})]}),G.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-dark-400 mb-2",children:"Pagamenti effettuati"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:G.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2 bg-dark-900 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.payment_method==="cash"&&e.jsx(D,{className:"w-4 h-4 text-emerald-400"}),s.payment_method==="card"&&e.jsx($,{className:"w-4 h-4 text-blue-400"}),s.payment_method==="online"&&e.jsx(ee,{className:"w-4 h-4 text-purple-400"}),e.jsxs("span",{className:"text-white",children:["€",s.amount.toFixed(2)]}),s.notes&&e.jsxs("span",{className:"text-dark-400",children:["- ",s.notes]})]})},s.id))})]}),f>0&&e.jsxs("div",{className:"space-y-4 p-4 border border-dark-700 rounded-xl",children:[e.jsx("h4",{className:"font-medium text-white",children:"Nuovo pagamento"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Importo"}),e.jsx("input",{type:"number",step:"0.01",value:d.amount,onChange:s=>v({...d,amount:s.target.value}),className:"input",placeholder:`Max €${f.toFixed(2)}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Note (opzionale)"}),e.jsx("input",{type:"text",value:d.notes,onChange:s=>v({...d,notes:s.target.value}),className:"input",placeholder:"Es. Marco"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>v({...d,method:"cash"}),className:`flex-1 p-2 rounded-lg border flex items-center justify-center gap-2 ${d.method==="cash"?"border-primary-500 bg-primary-500/10":"border-dark-700"}`,children:[e.jsx(D,{className:"w-4 h-4"})," Contanti"]}),e.jsxs("button",{onClick:()=>v({...d,method:"card"}),className:`flex-1 p-2 rounded-lg border flex items-center justify-center gap-2 ${d.method==="card"?"border-primary-500 bg-primary-500/10":"border-dark-700"}`,children:[e.jsx($,{className:"w-4 h-4"})," Carta"]})]}),e.jsx("button",{onClick:Fe,className:"btn-primary w-full",children:"Aggiungi Pagamento"})]}),e.jsx("button",{onClick:()=>A(!1),className:"btn-secondary w-full",children:"Chiudi"})]})})]})}export{ys as Tables};

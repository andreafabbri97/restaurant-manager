import{d as K,j as e,U as pe,S as J,e as Be,f as Re,h as ue,u as Ue,i as Le,r,k as Ye,l as He,m as Qe,n as We,o as Xe,p as ge,s as p,X as Ge,q as Je,t as Ke,v as Ze,w as es,x as ss,y as ve}from"./index-Cjb8kro6.js";import{C as Ce}from"./clock-DGJr6FEA.js";import{P as ts}from"./plus-CGoxE8aw.js";import{B as as}from"./banknote-DmSQR9-J.js";import{S as ns}from"./smartphone-ZcTTG0Uu.js";import{M as ye}from"./Modal-Cfe-xpKF.js";const rs=[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]],ls=K("bike",rs);const is=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ds=K("chevron-up",is);const os=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ke=K("message-square",os);const cs=[["path",{d:"M5 12h14",key:"1ays0h"}]],xs=K("minus",cs);function we({isMobile:T=!1,orderType:h,setOrderType:C,selectedTable:Z,setSelectedTable:E,onTableSelect:P,tables:D,customerName:ee,setCustomerName:se,customerPhone:te,setCustomerPhone:ae,cart:f,cartItemsCount:d,cartTotal:g,ivaRate:$,ivaAmount:V,grandTotal:v,expandedItemId:b,setExpandedItemId:m,notes:y,setNotes:j,paymentMethod:N,setPaymentMethod:o,smacPassed:u,setSmacPassed:q,isSubmitting:B,clearCart:k,updateQuantity:S,removeFromCart:F,updateItemNotes:_,submitOrder:A,isSessionOrder:w=!1,sessionTableName:I,orderNumber:R}){return e.jsxs("div",{className:`flex flex-col ${T?"h-full":""}`,children:[w&&e.jsx("div",{className:"p-3 bg-primary-500/10 border-b border-primary-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-primary-400 font-medium",children:["Comanda #",R]}),e.jsx("p",{className:"text-lg font-bold text-white",children:I})]}),e.jsx("div",{className:"px-3 py-1 bg-primary-500/20 rounded-lg",children:e.jsx("span",{className:"text-sm font-medium text-primary-400",children:"Conto Aperto"})})]})}),!w&&e.jsxs("div",{className:"p-3 border-b border-dark-700",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>C("dine_in"),className:`flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl transition-all flex-1 ${h==="dine_in"?"bg-primary-500 text-dark-900":"bg-dark-700 text-dark-300 hover:bg-dark-600"}`,children:[e.jsx(pe,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Tavolo"})]}),e.jsxs("button",{onClick:()=>C("takeaway"),className:`flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl transition-all flex-1 ${h==="takeaway"?"bg-primary-500 text-dark-900":"bg-dark-700 text-dark-300 hover:bg-dark-600"}`,children:[e.jsx(Ce,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Asporto"})]}),e.jsxs("button",{onClick:()=>C("delivery"),className:`flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl transition-all flex-1 ${h==="delivery"?"bg-primary-500 text-dark-900":"bg-dark-700 text-dark-300 hover:bg-dark-600"}`,children:[e.jsx(ls,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Domicilio"})]})]}),h==="dine_in"&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-dark-400 mb-2",children:"Seleziona tavolo:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(t=>e.jsx("button",{onClick:()=>P?P(t.id):E(t.id),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${Z===t.id?"bg-primary-500 text-dark-900":"bg-dark-700 text-dark-300 hover:bg-dark-600"}`,children:t.name},t.id))})]}),(h==="takeaway"||h==="delivery")&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("input",{type:"text",placeholder:"Nome cliente",value:ee,onChange:t=>se(t.target.value),className:"input py-2.5 text-base"}),e.jsx("input",{type:"tel",placeholder:"Telefono",value:te,onChange:t=>ae(t.target.value),className:"input py-2.5 text-base"})]})]}),e.jsxs("div",{className:"px-3 py-2 bg-dark-900/50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4 text-primary-400"}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[d," articoli"]})]}),f.length>0&&e.jsx("button",{onClick:k,className:"text-xs text-red-400 hover:text-red-300 transition-colors px-2 py-1",children:"Svuota"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 min-h-[150px]",children:f.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-dark-400 py-8",children:[e.jsx(J,{className:"w-12 h-12 mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Carrello vuoto"}),e.jsx("p",{className:"text-xs mt-1",children:"Tocca un prodotto per aggiungerlo"})]}):e.jsx("div",{className:"space-y-2",children:f.map(t=>e.jsxs("div",{className:"bg-dark-900 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-white text-sm truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-primary-400 mt-0.5",children:["‚Ç¨",t.price.toFixed(2)," √ó ",t.quantity," = ‚Ç¨",(t.price*t.quantity).toFixed(2)]}),t.notes&&b!==t.id&&e.jsxs("p",{className:"text-xs text-amber-400 mt-1 truncate",children:["üìù ",t.notes]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("button",{onClick:()=>m(b===t.id?null:t.id),className:`w-9 h-9 rounded-lg flex items-center justify-center transition-colors ${b===t.id||t.notes?"bg-amber-500/20 text-amber-400":"bg-dark-700 text-dark-400 hover:bg-dark-600"}`,children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(t.id,-1),className:"w-9 h-9 rounded-lg bg-dark-700 flex items-center justify-center hover:bg-dark-600 transition-colors",children:e.jsx(xs,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center text-base font-semibold",children:t.quantity}),e.jsx("button",{onClick:()=>S(t.id,1),className:"w-9 h-9 rounded-lg bg-dark-700 flex items-center justify-center hover:bg-dark-600 transition-colors",children:e.jsx(ts,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>F(t.id),className:"w-9 h-9 ml-1 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors flex items-center justify-center",children:e.jsx(Be,{className:"w-4 h-4"})})]})]}),b===t.id&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ke,{className:"w-4 h-4 text-amber-400"}),e.jsx("span",{className:"text-xs text-amber-400 font-medium",children:"Note / Variazioni"})]}),e.jsx("input",{type:"text",value:t.notes||"",onChange:x=>_(t.id,x.target.value),placeholder:"Es: senza cipolla, piccante...",className:"w-full bg-dark-800 border border-dark-600 rounded-lg px-3 py-2 text-sm text-white placeholder-dark-500 focus:outline-none focus:border-amber-500"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:["Senza cipolla","Piccante","Extra salsa","Ben cotto"].map(x=>e.jsxs("button",{onClick:()=>{const U=t.notes||"",L=U?`${U}, ${x}`:x;_(t.id,L)},className:"px-2.5 py-1 text-xs bg-dark-700 text-dark-300 rounded-lg hover:bg-dark-600 transition-colors",children:["+ ",x]},x))})]})]},t.id))})}),f.length>0&&e.jsxs("div",{className:"border-t border-dark-700 bg-dark-800",children:[e.jsx("div",{className:"px-3 py-2 border-b border-dark-700",children:e.jsx("input",{type:"text",placeholder:"Note ordine (opzionale)...",value:y,onChange:t=>j(t.target.value),className:"input py-2.5 text-base"})}),!w&&e.jsxs("div",{className:"px-3 py-3 flex items-center gap-2 border-b border-dark-700",children:[e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsxs("button",{onClick:()=>o("cash"),className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-xl transition-all flex-1 ${N==="cash"?"bg-emerald-500 text-white":"bg-dark-700 text-dark-300 hover:bg-dark-600"}`,children:[e.jsx(as,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Contanti"})]}),e.jsxs("button",{onClick:()=>o("card"),className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-xl transition-all flex-1 ${N==="card"?"bg-blue-500 text-white":"bg-dark-700 text-dark-300 hover:bg-dark-600"}`,children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Carta"})]}),e.jsxs("button",{onClick:()=>o("online"),className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-xl transition-all flex-1 ${N==="online"?"bg-purple-500 text-white":"bg-dark-700 text-dark-300 hover:bg-dark-600"}`,children:[e.jsx(ns,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Online"})]})]}),e.jsxs("button",{onClick:()=>q(!u),className:`flex items-center gap-1.5 px-4 py-2 rounded-xl transition-all ${u?"bg-primary-500 text-dark-900":"bg-dark-700 text-dark-300 hover:bg-dark-600"}`,children:[u&&e.jsx(ue,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"SMAC"})]})]}),e.jsx("div",{className:"px-3 py-3 space-y-1",children:w?e.jsxs("div",{className:"flex justify-between text-xl font-bold text-white",children:[e.jsx("span",{children:"Totale Comanda"}),e.jsxs("span",{className:"text-primary-400",children:["‚Ç¨",g.toFixed(2)]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm text-dark-400",children:[e.jsx("span",{children:"Subtotale"}),e.jsxs("span",{children:["‚Ç¨",g.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-dark-400",children:[e.jsxs("span",{children:["IVA (",$,"%)"]}),e.jsxs("span",{children:["‚Ç¨",V.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-white pt-2",children:[e.jsx("span",{children:"Totale"}),e.jsxs("span",{className:"text-primary-400",children:["‚Ç¨",v.toFixed(2)]})]})]})}),e.jsx("div",{className:"p-3 pt-0 pb-safe",children:e.jsx("button",{onClick:A,disabled:f.length===0||B,className:"btn-primary w-full py-4 text-base font-semibold",children:B?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-dark-900"}):w?e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-5 h-5"}),"Invia Comanda #",R," - ‚Ç¨",g.toFixed(2)]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-5 h-5"}),"Conferma Ordine - ‚Ç¨",v.toFixed(2)]})})})]}),f.length===0&&e.jsx("div",{className:"p-3 border-t border-dark-700 pb-safe",children:e.jsxs("button",{disabled:!0,className:"btn-primary w-full py-4 opacity-50 cursor-not-allowed text-base",children:[e.jsx(J,{className:"w-5 h-5"}),"Aggiungi prodotti"]})})]})}function js(){const T=Ue(),[h]=Le(),[C,Z]=r.useState([]),[E,P]=r.useState([]),[D,ee]=r.useState([]),[se,te]=r.useState(null),[ae,f]=r.useState(!0),[d,g]=r.useState(null),[$,V]=r.useState(1),[v,b]=r.useState(null),[m,y]=r.useState([]),[j,N]=r.useState("dine_in"),[o,u]=r.useState(null),[q,B]=r.useState("cash"),[k,S]=r.useState(""),[F,_]=r.useState(""),[A,w]=r.useState(""),[I,R]=r.useState(!1),[t,x]=r.useState(!1),[U,L]=r.useState(null),[Se,ne]=r.useState(!1),[_e,Y]=r.useState(!1),[i,re]=r.useState(null),[le,ie]=r.useState([]),[H,de]=r.useState(null),[Oe,Q]=r.useState(!1),[O,oe]=r.useState(null),ce=h.get("session"),xe=h.get("table");r.useEffect(()=>{Te()},[ce,xe]);async function Te(){try{const[s,a,l,n]=await Promise.all([Ye(),He(),Qe(),We()]);if(Z(s),P(a),ee(l),te(n),s.length>0&&b(s[0].id),ce){const G=parseInt(ce),c=await Xe(G);if(c){g(c),u(c.table_id),N("dine_in");const Ve=await ge(G);V(Ve),c.customer_name&&S(c.customer_name),c.customer_phone&&_(c.customer_phone)}}else xe&&(u(parseInt(xe)),N("dine_in"))}catch(s){console.error("Error loading data:",s),p("Errore nel caricamento dati","error")}finally{f(!1)}}const he=v?E.filter(s=>s.category_id===v&&s.available):E.filter(s=>s.available),W=m.reduce((s,a)=>s+a.price*a.quantity,0),M=m.reduce((s,a)=>s+a.quantity,0),fe=se?.iva_rate||17,be=W*(fe/100),z=W+be;function je(s){y(a=>a.find(n=>n.id===s.id)?a.map(n=>n.id===s.id?{...n,quantity:n.quantity+1}:n):[...a,{...s,quantity:1}]),p(`${s.name} aggiunto`,"success")}function $e(s,a){y(l=>l.map(n=>n.id===s?{...n,quantity:Math.max(0,n.quantity+a)}:n).filter(n=>n.quantity>0))}function qe(s){y(a=>a.filter(l=>l.id!==s))}function Fe(s,a){y(l=>l.map(n=>n.id===s?{...n,notes:a}:n))}function Ae(){y([]),L(null)}async function Ie(s){if(d)return;const a=await Ke(s);if(a){const l=await Ze(a.id);re(a),ie(l),de(s),Y(!0)}else u(s),g(null)}async function Me(){if(!i||!H)return;g(i),u(H),N("dine_in");const s=await ge(i.id);V(s),i.customer_name&&S(i.customer_name),i.customer_phone&&_(i.customer_phone),Y(!1),re(null),ie([]),de(null),p("Comanda associata al conto aperto","success")}function ze(){H&&u(H),Y(!1),re(null),ie([]),de(null)}async function Ee(){if(m.length===0){p("Aggiungi almeno un prodotto","warning");return}if(j==="dine_in"&&!o&&!d){p("Seleziona un tavolo","warning");return}if(j==="dine_in"&&o&&!d){const s={date:new Date().toISOString().split("T")[0],total:z,payment_method:q,order_type:j,table_id:o,notes:A||void 0,status:"pending",smac_passed:I,customer_name:k||void 0,customer_phone:F||void 0},a=m.map(n=>({menu_item_id:n.id,quantity:n.quantity,price:n.price,notes:n.notes})),l=D.find(n=>n.id===o)?.name||`Tavolo ${o}`;oe({order:s,items:a,tableId:o,tableName:l}),Q(!0);return}await me()}async function me(s,a){x(!0);try{const l=d||s,n={date:new Date().toISOString().split("T")[0],total:l?W:z,payment_method:l?"cash":q,order_type:j,table_id:j==="dine_in"?o??void 0:void 0,notes:A||void 0,status:"pending",smac_passed:l?!1:I,customer_name:k||void 0,customer_phone:F||void 0,session_id:d?.id||a,order_number:l?d?$:1:void 0},G=m.map(c=>({menu_item_id:c.id,quantity:c.quantity,price:c.price,notes:c.notes}));await ss(n,G),d?(await ve(d.id),p(`Comanda #${$} inviata!`,"success"),T("/tables")):a?(await ve(a),p("Ordine creato e conto aperto!","success"),T("/tables")):(p("Ordine creato con successo!","success"),T("/orders"))}catch(l){console.error("Error creating order:",l),p("Errore nella creazione dell'ordine","error")}finally{x(!1)}}async function Pe(){if(O){x(!0);try{const s=await es(O.tableId,1,O.order.customer_name);Q(!1),oe(null),await me(!0,s.id)}catch(s){console.error("Error creating session:",s),p("Errore nell'apertura del conto","error"),x(!1)}}}async function De(){O&&(Q(!1),oe(null),await me(!1))}if(ae)return e.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})});const X=!!d,Ne={orderType:j,setOrderType:X?()=>{}:N,selectedTable:o,setSelectedTable:X?()=>{}:u,onTableSelect:X?void 0:Ie,tables:D,customerName:k,setCustomerName:S,customerPhone:F,setCustomerPhone:_,cart:m,cartItemsCount:M,cartTotal:W,ivaRate:fe,ivaAmount:be,grandTotal:z,expandedItemId:U,setExpandedItemId:L,notes:A,setNotes:w,paymentMethod:q,setPaymentMethod:B,smacPassed:I,setSmacPassed:R,isSubmitting:t,clearCart:Ae,updateQuantity:$e,removeFromCart:qe,updateItemNotes:Fe,submitOrder:Ee,isSessionOrder:X,sessionTableName:d?.table_name,orderNumber:$};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden lg:flex gap-4 h-[calc(100vh-100px)]",children:[e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:C.map(s=>e.jsx("button",{onClick:()=>b(s.id),className:`px-6 py-3 rounded-xl font-medium whitespace-nowrap transition-all ${v===s.id?"bg-primary-500 text-dark-900":"bg-dark-800 text-dark-300 hover:bg-dark-700"}`,children:s.name},s.id))}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:he.map(s=>e.jsxs("button",{onClick:()=>je(s),className:"menu-item-card text-left",children:[e.jsx("h3",{className:"font-semibold text-white mb-1 line-clamp-2",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-dark-400 mb-2 line-clamp-2",children:s.description}),e.jsxs("p",{className:"text-xl font-bold text-primary-400",children:["‚Ç¨",s.price.toFixed(2)]})]},s.id))})})]}),e.jsx("div",{className:"w-[420px] flex flex-col bg-dark-800 rounded-2xl border border-dark-700",children:e.jsx(we,{...Ne})})]}),e.jsxs("div",{className:"lg:hidden flex flex-col h-[calc(100vh-120px)]",children:[e.jsx("div",{className:"flex gap-2 mb-3 overflow-x-auto pb-2 -mx-3 px-3",children:C.map(s=>e.jsx("button",{onClick:()=>b(s.id),className:`px-4 py-2.5 rounded-xl font-medium whitespace-nowrap transition-all text-sm ${v===s.id?"bg-primary-500 text-dark-900":"bg-dark-800 text-dark-300"}`,children:s.name},s.id))}),e.jsx("div",{className:"flex-1 overflow-y-auto -mx-3 px-3 pb-24",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:he.map(s=>{const a=m.find(l=>l.id===s.id);return e.jsxs("button",{onClick:()=>je(s),className:"relative bg-dark-800 rounded-xl p-3 text-left active:scale-[0.98] transition-transform border border-dark-700",children:[a&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-primary-500 rounded-full flex items-center justify-center text-xs font-bold text-dark-900",children:a.quantity}),e.jsx("h3",{className:"font-semibold text-white text-sm line-clamp-2 mb-1",children:s.name}),e.jsxs("p",{className:"text-lg font-bold text-primary-400",children:["‚Ç¨",s.price.toFixed(2)]})]},s.id)})})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-dark-900 border-t border-dark-700 lg:hidden z-30 safe-bottom",children:e.jsxs("button",{onClick:()=>ne(!0),className:"w-full flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"w-6 h-6 text-primary-400"}),M>0&&e.jsx("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-primary-500 rounded-full flex items-center justify-center text-xs font-bold text-dark-900",children:M})]}),e.jsx("span",{className:"text-white font-medium",children:m.length===0?"Carrello vuoto":`${M} articoli`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xl font-bold text-primary-400",children:["‚Ç¨",z.toFixed(2)]}),e.jsx(ds,{className:"w-5 h-5 text-dark-400"})]})]})}),Se&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>ne(!1)}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-dark-800 rounded-t-3xl max-h-[90vh] flex flex-col animate-slide-up",children:[e.jsx("div",{className:"flex justify-center pt-3 pb-1",children:e.jsx("div",{className:"w-12 h-1.5 bg-dark-600 rounded-full"})}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-dark-700",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Il tuo ordine"}),e.jsx("button",{onClick:()=>ne(!1),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:e.jsx(Ge,{className:"w-6 h-6 text-dark-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(we,{...Ne,isMobile:!0})})]})]})]}),e.jsx("style",{children:`
        @keyframes slide-up {
          from {
            transform: translateY(100%);
          }
          to {
            transform: translateY(0);
          }
        }
        .animate-slide-up {
          animation: slide-up 0.3s ease-out;
        }
        .safe-bottom {
          padding-bottom: env(safe-area-inset-bottom, 0);
        }
        .pb-safe {
          padding-bottom: env(safe-area-inset-bottom, 12px);
        }
      `}),e.jsx(ye,{isOpen:_e,onClose:()=>Y(!1),title:"Conto Aperto Rilevato",size:"md",children:i&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:[e.jsx(Je,{className:"w-6 h-6 text-amber-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-amber-400",children:"Questo tavolo ha gi√† un conto aperto"}),e.jsx("p",{className:"text-sm text-dark-300 mt-1",children:"Vuoi aggiungere la comanda al conto esistente?"})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-white mb-3",children:i.table_name||`Tavolo ${i.table_id}`}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-dark-400",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Coperti"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:i.covers})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-dark-400",children:[e.jsx(Ce,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Comande"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:le.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Totale"}),e.jsxs("p",{className:"text-lg font-bold text-primary-400",children:["‚Ç¨",i.total.toFixed(2)]})]})]}),i.customer_name&&e.jsxs("p",{className:"mt-3 text-sm text-dark-400",children:["Cliente: ",e.jsx("span",{className:"text-white",children:i.customer_name})]}),le.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-700",children:[e.jsx("p",{className:"text-sm text-dark-400 mb-2",children:"Comande esistenti:"}),e.jsx("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:le.map(s=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-dark-300",children:["Comanda #",s.order_number||1]}),e.jsxs("span",{className:"text-white",children:["‚Ç¨",s.total.toFixed(2)]})]},s.id))})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:Me,className:"btn-primary w-full py-3",children:"S√¨, aggiungi al conto"}),e.jsx("button",{onClick:ze,className:"btn-secondary w-full",children:"No, crea ordine separato"})]})]})}),e.jsx(ye,{isOpen:Oe,onClose:()=>Q(!1),title:"Aprire un Conto?",size:"md",children:O&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-primary-500/10 border border-primary-500/30 rounded-xl",children:[e.jsx(pe,{className:"w-6 h-6 text-primary-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-primary-400",children:["Stai creando un ordine per ",O.tableName]}),e.jsx("p",{className:"text-sm text-dark-300 mt-1",children:"Vuoi aprire un conto per questo tavolo? Cos√¨ potrai aggiungere altre comande in seguito."})]})]}),e.jsxs("div",{className:"p-4 bg-dark-900 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Riepilogo Ordine"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-dark-400",children:[M," articoli"]}),e.jsxs("span",{className:"text-xl font-bold text-primary-400",children:["‚Ç¨",z.toFixed(2)]})]}),k&&e.jsxs("p",{className:"text-sm text-dark-400 mt-2",children:["Cliente: ",e.jsx("span",{className:"text-white",children:k})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:Pe,disabled:t,className:"btn-primary w-full py-3",children:t?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-dark-900 mx-auto"}):"S√¨, apri conto e invia ordine"}),e.jsx("button",{onClick:De,disabled:t,className:"btn-secondary w-full",children:"No, solo ordine singolo"})]})]})})]})}export{js as NewOrder};

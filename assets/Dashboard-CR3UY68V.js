import{r,g as k,a as n,b as T,j as e,L as t,S as d,U as x,T as m,C as o,c as _}from"./index-Bui9AK7p.js";import{T as h}from"./trending-up-C9RaoFU7.js";import{C as A}from"./clock-BXbuAUB0.js";import{A as j}from"./arrow-right-VBZLpynQ.js";function P(){const[l,p]=r.useState({orders:0,revenue:0,avgOrder:0}),[i,N]=r.useState([]),[c,g]=r.useState([]),[a,f]=r.useState([]),[v,y]=r.useState(!0);r.useEffect(()=>{u()},[]);async function u(){try{const s=new Date().toISOString().split("T")[0],[b,w,S,O]=await Promise.all([k(s),n("pending"),n("preparing"),T()]);p(b),N(w),g(S),f(O)}catch(s){console.error("Error loading dashboard data:",s)}finally{y(!1)}}return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Dashboard"}),e.jsx("p",{className:"text-dark-400 mt-1",children:"Panoramica del ristorante"})]}),e.jsxs(t,{to:"/orders/new",className:"btn-primary btn-lg",children:[e.jsx(d,{className:"w-5 h-5"}),"Nuovo Ordine"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"stat-card glow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-label",children:"Ordini Oggi"}),e.jsx("p",{className:"stat-value",children:l.orders})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary-500/20 flex items-center justify-center",children:e.jsx(d,{className:"w-6 h-6 text-primary-400"})})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-label",children:"Incasso Oggi"}),e.jsxs("p",{className:"stat-value",children:["€",l.revenue.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl bg-emerald-500/20 flex items-center justify-center",children:e.jsx(h,{className:"w-6 h-6 text-emerald-400"})})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-label",children:"Media Ordine"}),e.jsxs("p",{className:"stat-value",children:["€",l.avgOrder.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center",children:e.jsx(x,{className:"w-6 h-6 text-blue-400"})})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-label",children:"Scorte Basse"}),e.jsx("p",{className:"stat-value",children:a.length})]}),e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${a.length>0?"bg-red-500/20":"bg-emerald-500/20"}`,children:e.jsx(m,{className:`w-6 h-6 ${a.length>0?"text-red-400":"text-emerald-400"}`})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-amber-400"}),e.jsx("h2",{className:"font-semibold text-white",children:"In Attesa"})]}),e.jsx("span",{className:"badge-warning",children:i.length})]}),e.jsxs("div",{className:"card-body space-y-3",children:[i.length===0?e.jsx("p",{className:"text-dark-400 text-center py-4",children:"Nessun ordine in attesa"}):i.slice(0,5).map(s=>e.jsxs("div",{className:"order-item",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white",children:["Ordine #",s.id]}),e.jsx("p",{className:"text-sm text-dark-400",children:s.order_type==="dine_in"?`Tavolo ${s.table_name}`:s.order_type==="takeaway"?"Asporto":"Domicilio"})]}),e.jsxs("p",{className:"font-semibold text-primary-400",children:["€",s.total.toFixed(2)]})]},s.id)),i.length>5&&e.jsxs(t,{to:"/orders",className:"flex items-center justify-center gap-2 text-primary-400 hover:text-primary-300 py-2",children:["Vedi tutti ",e.jsx(j,{className:"w-4 h-4"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5 text-blue-400"}),e.jsx("h2",{className:"font-semibold text-white",children:"In Preparazione"})]}),e.jsx("span",{className:"badge-info",children:c.length})]}),e.jsx("div",{className:"card-body space-y-3",children:c.length===0?e.jsx("p",{className:"text-dark-400 text-center py-4",children:"Nessun ordine in preparazione"}):c.slice(0,5).map(s=>e.jsxs("div",{className:"order-item",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white",children:["Ordine #",s.id]}),e.jsx("p",{className:"text-sm text-dark-400",children:s.order_type==="dine_in"?`Tavolo ${s.table_name}`:s.order_type==="takeaway"?"Asporto":"Domicilio"})]}),e.jsxs("p",{className:"font-semibold text-primary-400",children:["€",s.total.toFixed(2)]})]},s.id))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-red-400"}),e.jsx("h2",{className:"font-semibold text-white",children:"Scorte Basse"})]}),a.length>0&&e.jsx("span",{className:"badge-danger",children:a.length})]}),e.jsxs("div",{className:"card-body space-y-3",children:[a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(_,{className:"w-12 h-12 text-emerald-400 mb-3"}),e.jsx("p",{className:"text-dark-300",children:"Tutte le scorte sono OK!"})]}):a.map(s=>e.jsxs("div",{className:"order-item border-l-4 border-red-500",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:s.ingredient_name}),e.jsxs("p",{className:"text-sm text-dark-400",children:["Soglia: ",s.threshold," ",s.unit]})]}),e.jsxs("p",{className:"font-semibold text-red-400",children:[s.quantity," ",s.unit]})]},s.id)),a.length>0&&e.jsxs(t,{to:"/inventory",className:"flex items-center justify-center gap-2 text-primary-400 hover:text-primary-300 py-2",children:["Gestisci inventario ",e.jsx(j,{className:"w-4 h-4"})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"font-semibold text-white",children:"Azioni Rapide"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(t,{to:"/orders/new",className:"btn-primary text-center py-6 flex flex-col items-center gap-2",children:[e.jsx(d,{className:"w-8 h-8"}),e.jsx("span",{children:"Nuovo Ordine"})]}),e.jsxs(t,{to:"/tables",className:"btn-secondary text-center py-6 flex flex-col items-center gap-2",children:[e.jsx(x,{className:"w-8 h-8"}),e.jsx("span",{children:"Tavoli"})]}),e.jsxs(t,{to:"/menu",className:"btn-secondary text-center py-6 flex flex-col items-center gap-2",children:[e.jsx(o,{className:"w-8 h-8"}),e.jsx("span",{children:"Menu"})]}),e.jsxs(t,{to:"/reports",className:"btn-secondary text-center py-6 flex flex-col items-center gap-2",children:[e.jsx(h,{className:"w-8 h-8"}),e.jsx("span",{children:"Report"})]})]})})]})]})}export{P as Dashboard};

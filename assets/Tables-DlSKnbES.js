import{d as Z,u as ze,r as n,m as Fe,J as Oe,K as J,s as r,j as e,U as K,e as Re,X as De,S as $e,M as Ie,f as O,N as qe,O as Le,Q as Be,V as Ge,Y as Ue,Z as He,_ as Q,$ as Je,a0 as Ke,a1 as V,a2 as X,t as Qe,a3 as Ve}from"./index-Bui9AK7p.js";import{M as j}from"./Modal--abPZav2.js";import{P as Xe}from"./plus-CrvXw7TW.js";import{C as Ye}from"./calendar-Dlq-9o1j.js";import{P as Ze}from"./pen-CTMkbn9y.js";import{C as We}from"./clock-BXbuAUB0.js";import{A as es}from"./arrow-right-VBZLpynQ.js";import{B as R}from"./banknote-BA_j6h7o.js";import{G as Y}from"./globe-7jXD8uUr.js";const ss=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],as=Z("phone",ss);const ts=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],ns=Z("split",ts);function us(){const W=ze(),[z,ee]=n.useState([]),[y,se]=n.useState([]),[D,ae]=n.useState([]),[te,ne]=n.useState(!0),[g,re]=n.useState(new Date().toISOString().split("T")[0]),[le,C]=n.useState(!1),[ie,w]=n.useState(!1),[oe,k]=n.useState(!1),[ce,N]=n.useState(!1),[de,S]=n.useState(!1),[me,T]=n.useState(!1),[xe,_]=n.useState(!1),[P,$]=n.useState(null),[I,he]=n.useState(null),[a,ue]=n.useState(null),[F,pe]=n.useState([]),[q,L]=n.useState([]),[f,B]=n.useState(0),[p,M]=n.useState({name:"",capacity:"4"}),[m,E]=n.useState({covers:"2",customer_name:"",customer_phone:""}),[c,b]=n.useState({method:"cash",smac:!1}),[o,v]=n.useState({amount:"",method:"cash",notes:""}),[l,h]=n.useState({table_id:0,date:new Date().toISOString().split("T")[0],time:"19:00",customer_name:"",phone:"",guests:"2",notes:""});n.useEffect(()=>{x()},[g]);async function x(){try{const[s,t,i]=await Promise.all([Fe(),Oe(g),J()]);ee(s),se(t),ae(i)}catch(s){console.error("Error loading data:",s),r("Errore nel caricamento dati","error")}finally{ne(!1)}}function A(s){return D.some(d=>d.table_id===s)?"occupied":y.some(d=>d.table_id===s&&d.status==="confirmed")?"reserved":"available"}function G(s){return D.find(t=>t.table_id===s)}function je(s){return y.find(t=>t.table_id===s&&t.status==="confirmed")}function U(s){s?($(s),M({name:s.name,capacity:s.capacity.toString()})):($(null),M({name:"",capacity:"4"})),C(!0)}function ge(s){h({...l,table_id:s,date:g}),w(!0)}async function ve(){if(!p.name.trim()){r("Inserisci un nome per il tavolo","warning");return}try{const s={name:p.name.trim(),capacity:parseInt(p.capacity)||4};P?(await Be(P.id,s),r("Tavolo aggiornato","success")):(await Ge(s),r("Tavolo creato","success")),C(!1),x()}catch(s){console.error("Error saving table:",s),r("Errore nel salvataggio","error")}}async function Ne(s){if(confirm("Sei sicuro di voler eliminare questo tavolo?"))try{await qe(s),r("Tavolo eliminato","success"),x()}catch(t){console.error("Error deleting table:",t),r("Errore nell'eliminazione","error")}}async function fe(){if(!l.customer_name.trim()){r("Inserisci il nome del cliente","warning");return}try{await Ue({table_id:l.table_id,date:l.date,time:l.time,customer_name:l.customer_name.trim(),phone:l.phone,guests:parseInt(l.guests)||2,notes:l.notes||void 0,status:"confirmed"}),r("Prenotazione creata","success"),w(!1),h({table_id:0,date:g,time:"19:00",customer_name:"",phone:"",guests:"2",notes:""}),x()}catch(s){console.error("Error creating reservation:",s),r("Errore nella creazione","error")}}async function be(s){if(confirm("Annullare questa prenotazione?"))try{await Le(s),r("Prenotazione annullata","success"),x()}catch(t){console.error("Error cancelling reservation:",t),r("Errore nell'annullamento","error")}}function H(s){const t=A(s),i=G(s);t==="occupied"&&i?ye(i):t==="available"&&(he(s),E({covers:"2",customer_name:"",customer_phone:""}),k(!0))}async function ye(s){try{await Qe(s.id);const[t,i,d]=await Promise.all([Ve(s.id),V(s.id),X(s.id)]),Ee=(await J()).find(Ae=>Ae.id===s.id);ue(Ee||s),pe(t),L(i),B(d),N(!0)}catch(t){console.error("Error loading session details:",t),r("Errore nel caricamento dettagli","error")}}async function Ce(){if(I)try{await He(I,parseInt(m.covers)||1,m.customer_name||void 0,m.customer_phone||void 0),r("Conto aperto","success"),k(!1),x()}catch(s){console.error("Error opening session:",s),r("Errore nell'apertura conto","error")}}function we(){a&&W(`/orders/new?table=${a.table_id}&session=${a.id}`)}async function ke(){a&&(b({method:"cash",smac:!1}),T(!0))}async function Se(){if(a)try{await Q(a.id,c.method,c.smac),r("Conto chiuso","success"),T(!1),N(!1),x()}catch(s){console.error("Error closing session:",s),r("Errore nella chiusura","error")}}function Te(){a&&S(!0)}async function _e(s){if(a)try{await Je(a.id,s),r("Tavolo trasferito","success"),S(!1),N(!1),x()}catch(t){console.error("Error transferring table:",t),r("Errore nel trasferimento","error")}}function Pe(){a&&(v({amount:"",method:"cash",notes:""}),_(!0))}async function Me(){if(!a)return;const s=parseFloat(o.amount);if(isNaN(s)||s<=0){r("Inserisci un importo valido","warning");return}if(s>f){r("Importo superiore al rimanente","warning");return}try{await Ke(a.id,s,o.method,o.notes||void 0);const[t,i]=await Promise.all([V(a.id),X(a.id)]);L(t),B(i),v({amount:"",method:"cash",notes:""}),r("Pagamento aggiunto","success"),i<=0&&(await Q(a.id,"split",!1),r("Conto saldato e chiuso","success"),_(!1),N(!1),x())}catch(t){console.error("Error adding payment:",t),r("Errore nell'aggiunta pagamento","error")}}return te?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Tavoli"}),e.jsx("p",{className:"text-dark-400 mt-1",children:"Gestisci tavoli e prenotazioni"})]}),e.jsxs("button",{onClick:()=>U(),className:"btn-primary",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Nuovo Tavolo"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ye,{className:"w-5 h-5 text-dark-400"}),e.jsx("input",{type:"date",value:g,onChange:s=>re(s.target.value),className:"input w-auto"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-emerald-500"}),e.jsx("span",{className:"text-sm text-dark-300",children:"Disponibile"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-red-500"}),e.jsx("span",{className:"text-sm text-dark-300",children:"Occupato"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-amber-500"}),e.jsx("span",{className:"text-sm text-dark-300",children:"Prenotato"})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:z.map(s=>{const t=A(s.id),i=G(s.id),d=je(s.id);return e.jsxs("div",{onClick:()=>H(s.id),className:`
                ${t==="available"?"table-available cursor-pointer hover:scale-105":""}
                ${t==="occupied"?"table-occupied cursor-pointer hover:scale-105":""}
                ${t==="reserved"?"table-reserved":""}
                p-4 transition-transform
              `,children:[e.jsx("h3",{className:"text-lg font-bold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:s.capacity})]}),i&&e.jsxs("div",{className:"mt-2 text-xs space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"}),i.covers," coperti"]}),e.jsxs("p",{className:"font-semibold text-lg",children:["€",i.total.toFixed(2)]}),i.customer_name&&e.jsx("p",{className:"truncate",children:i.customer_name})]}),d&&!i&&e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsx("p",{children:d.customer_name}),e.jsx("p",{children:d.time})]}),t==="available"&&e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx("button",{onClick:u=>{u.stopPropagation(),H(s.id)},className:"text-xs font-medium text-emerald-400 hover:text-emerald-300",children:"Apri Conto"}),e.jsx("button",{onClick:u=>{u.stopPropagation(),ge(s.id)},className:"block text-xs underline hover:no-underline",children:"Prenota"})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:u=>{u.stopPropagation(),U(s)},className:"p-1 bg-dark-800 rounded hover:bg-dark-700",children:e.jsx(Ze,{className:"w-3 h-3"})}),e.jsx("button",{onClick:u=>{u.stopPropagation(),Ne(s.id)},className:"p-1 bg-dark-800 rounded hover:bg-red-500/20",children:e.jsx(Re,{className:"w-3 h-3"})})]})]},s.id)})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h2",{className:"font-semibold text-white",children:["Prenotazioni per ",new Date(g).toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long"})]})}),e.jsx("div",{className:"card-body",children:y.length===0?e.jsx("p",{className:"text-dark-400 text-center py-4",children:"Nessuna prenotazione per questa data"}):e.jsx("div",{className:"space-y-3",children:y.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-900 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary-500/20 flex items-center justify-center",children:e.jsx(We,{className:"w-6 h-6 text-primary-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:s.customer_name}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-dark-400",children:[e.jsx("span",{children:s.time}),e.jsx("span",{children:s.table_name}),e.jsxs("span",{children:[s.guests," ospiti"]})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-dark-400",children:[e.jsx(as,{className:"w-3 h-3"}),s.phone]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`badge ${s.status==="confirmed"?"badge-success":"badge-danger"}`,children:s.status==="confirmed"?"Confermata":"Annullata"}),s.status==="confirmed"&&e.jsx("button",{onClick:()=>be(s.id),className:"p-2 hover:bg-red-500/20 rounded-lg transition-colors",children:e.jsx(De,{className:"w-5 h-5 text-red-400"})})]})]},s.id))})})]}),e.jsx(j,{isOpen:le,onClose:()=>C(!1),title:P?"Modifica Tavolo":"Nuovo Tavolo",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Nome Tavolo"}),e.jsx("input",{type:"text",value:p.name,onChange:s=>M({...p,name:s.target.value}),className:"input",placeholder:"Es. Tavolo 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Capacità (posti)"}),e.jsx("input",{type:"number",min:"1",value:p.capacity,onChange:s=>M({...p,capacity:s.target.value}),className:"input"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsx("button",{onClick:ve,className:"btn-primary flex-1",children:P?"Salva":"Crea"}),e.jsx("button",{onClick:()=>C(!1),className:"btn-secondary",children:"Annulla"})]})]})}),e.jsx(j,{isOpen:ie,onClose:()=>w(!1),title:"Nuova Prenotazione",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Data"}),e.jsx("input",{type:"date",value:l.date,onChange:s=>h({...l,date:s.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Ora"}),e.jsx("input",{type:"time",value:l.time,onChange:s=>h({...l,time:s.target.value}),className:"input"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Nome Cliente *"}),e.jsx("input",{type:"text",value:l.customer_name,onChange:s=>h({...l,customer_name:s.target.value}),className:"input",placeholder:"Nome e cognome"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Telefono"}),e.jsx("input",{type:"tel",value:l.phone,onChange:s=>h({...l,phone:s.target.value}),className:"input",placeholder:"+39..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Ospiti"}),e.jsx("input",{type:"number",min:"1",value:l.guests,onChange:s=>h({...l,guests:s.target.value}),className:"input"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Note"}),e.jsx("textarea",{value:l.notes,onChange:s=>h({...l,notes:s.target.value}),className:"input resize-none h-20",placeholder:"Note aggiuntive..."})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsx("button",{onClick:fe,className:"btn-primary flex-1",children:"Crea Prenotazione"}),e.jsx("button",{onClick:()=>w(!1),className:"btn-secondary",children:"Annulla"})]})]})}),e.jsx(j,{isOpen:oe,onClose:()=>k(!1),title:"Apri Conto",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Numero Coperti"}),e.jsx("input",{type:"number",min:"1",value:m.covers,onChange:s=>E({...m,covers:s.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Nome Cliente (opzionale)"}),e.jsx("input",{type:"text",value:m.customer_name,onChange:s=>E({...m,customer_name:s.target.value}),className:"input",placeholder:"Es. Marco Rossi"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Telefono (opzionale)"}),e.jsx("input",{type:"tel",value:m.customer_phone,onChange:s=>E({...m,customer_phone:s.target.value}),className:"input",placeholder:"+39..."})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsx("button",{onClick:Ce,className:"btn-primary flex-1",children:"Apri Conto"}),e.jsx("button",{onClick:()=>k(!1),className:"btn-secondary",children:"Annulla"})]})]})}),e.jsx(j,{isOpen:ce,onClose:()=>N(!1),title:`Conto ${a?.table_name||""}`,size:"lg",children:a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-dark-900 rounded-xl",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Coperti"}),e.jsx("p",{className:"text-xl font-bold text-white",children:a.covers})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Comande"}),e.jsx("p",{className:"text-xl font-bold text-white",children:F.length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Totale"}),e.jsxs("p",{className:"text-xl font-bold text-primary-400",children:["€",a.total.toFixed(2)]})]})]}),a.customer_name&&e.jsxs("p",{className:"text-dark-400",children:["Cliente: ",e.jsx("span",{className:"text-white",children:a.customer_name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-3",children:"Comande"}),F.length===0?e.jsx("p",{className:"text-dark-400 text-center py-4",children:"Nessuna comanda ancora"}):e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:F.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-900 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-white",children:["Comanda #",s.order_number||1]}),e.jsx("span",{className:`ml-2 badge ${s.status==="pending"?"badge-warning":s.status==="preparing"?"badge-info":s.status==="ready"?"badge-success":"badge-secondary"}`,children:s.status==="pending"?"In attesa":s.status==="preparing"?"In preparazione":s.status==="ready"?"Pronto":s.status==="delivered"?"Consegnato":s.status})]}),e.jsxs("span",{className:"font-semibold text-white",children:["€",s.total.toFixed(2)]})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:we,className:"btn-primary flex items-center justify-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"}),"Aggiungi Comanda"]}),e.jsxs("button",{onClick:Te,className:"btn-secondary flex items-center justify-center gap-2",children:[e.jsx(es,{className:"w-4 h-4"}),"Trasferisci"]}),e.jsxs("button",{onClick:Pe,className:"btn-secondary flex items-center justify-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4"}),"Dividi Conto"]}),e.jsxs("button",{onClick:ke,className:"btn-primary bg-emerald-600 hover:bg-emerald-700 flex items-center justify-center gap-2",disabled:a.total===0,children:[e.jsx(Ie,{className:"w-4 h-4"}),"Chiudi Conto"]})]})]})}),e.jsx(j,{isOpen:me,onClose:()=>T(!1),title:"Chiudi Conto",size:"sm",children:a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center p-4 bg-dark-900 rounded-xl",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Totale da pagare"}),e.jsxs("p",{className:"text-3xl font-bold text-primary-400",children:["€",a.total.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Metodo di Pagamento"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>b({...c,method:"cash"}),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-colors ${c.method==="cash"?"border-primary-500 bg-primary-500/10":"border-dark-700 hover:border-dark-600"}`,children:[e.jsx(R,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Contanti"})]}),e.jsxs("button",{onClick:()=>b({...c,method:"card"}),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-colors ${c.method==="card"?"border-primary-500 bg-primary-500/10":"border-dark-700 hover:border-dark-600"}`,children:[e.jsx(O,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Carta"})]}),e.jsxs("button",{onClick:()=>b({...c,method:"online"}),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-colors ${c.method==="online"?"border-primary-500 bg-primary-500/10":"border-dark-700 hover:border-dark-600"}`,children:[e.jsx(Y,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Online"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"smac",checked:c.smac,onChange:s=>b({...c,smac:s.target.checked}),className:"w-5 h-5 rounded border-dark-600 bg-dark-800 text-primary-500 focus:ring-primary-500"}),e.jsx("label",{htmlFor:"smac",className:"text-white",children:"SMAC passato"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsx("button",{onClick:Se,className:"btn-primary flex-1",children:"Conferma Pagamento"}),e.jsx("button",{onClick:()=>T(!1),className:"btn-secondary",children:"Annulla"})]})]})}),e.jsx(j,{isOpen:de,onClose:()=>S(!1),title:"Trasferisci Tavolo",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-dark-400",children:"Seleziona il nuovo tavolo:"}),e.jsx("div",{className:"grid grid-cols-3 gap-3 max-h-64 overflow-y-auto",children:z.filter(s=>s.id!==a?.table_id&&A(s.id)==="available").map(s=>e.jsxs("button",{onClick:()=>_e(s.id),className:"p-4 bg-dark-900 rounded-xl hover:bg-dark-800 transition-colors text-center",children:[e.jsx("p",{className:"font-semibold text-white",children:s.name}),e.jsxs("p",{className:"text-sm text-dark-400",children:[s.capacity," posti"]})]},s.id))}),z.filter(s=>s.id!==a?.table_id&&A(s.id)==="available").length===0&&e.jsx("p",{className:"text-center text-dark-400 py-4",children:"Nessun tavolo libero disponibile"}),e.jsx("button",{onClick:()=>S(!1),className:"btn-secondary w-full",children:"Annulla"})]})}),e.jsx(j,{isOpen:xe,onClose:()=>_(!1),title:"Dividi Conto",size:"md",children:a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-dark-900 rounded-xl",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Totale"}),e.jsxs("p",{className:"text-lg font-bold text-white",children:["€",a.total.toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Pagato"}),e.jsxs("p",{className:"text-lg font-bold text-emerald-400",children:["€",(a.total-f).toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-dark-400",children:"Rimanente"}),e.jsxs("p",{className:"text-lg font-bold text-primary-400",children:["€",f.toFixed(2)]})]})]}),q.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-dark-400 mb-2",children:"Pagamenti effettuati"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:q.map(s=>e.jsx("div",{className:"flex items-center justify-between p-2 bg-dark-900 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.payment_method==="cash"&&e.jsx(R,{className:"w-4 h-4 text-emerald-400"}),s.payment_method==="card"&&e.jsx(O,{className:"w-4 h-4 text-blue-400"}),s.payment_method==="online"&&e.jsx(Y,{className:"w-4 h-4 text-purple-400"}),e.jsxs("span",{className:"text-white",children:["€",s.amount.toFixed(2)]}),s.notes&&e.jsxs("span",{className:"text-dark-400",children:["- ",s.notes]})]})},s.id))})]}),f>0&&e.jsxs("div",{className:"space-y-4 p-4 border border-dark-700 rounded-xl",children:[e.jsx("h4",{className:"font-medium text-white",children:"Nuovo pagamento"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Importo"}),e.jsx("input",{type:"number",step:"0.01",value:o.amount,onChange:s=>v({...o,amount:s.target.value}),className:"input",placeholder:`Max €${f.toFixed(2)}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Note (opzionale)"}),e.jsx("input",{type:"text",value:o.notes,onChange:s=>v({...o,notes:s.target.value}),className:"input",placeholder:"Es. Marco"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>v({...o,method:"cash"}),className:`flex-1 p-2 rounded-lg border flex items-center justify-center gap-2 ${o.method==="cash"?"border-primary-500 bg-primary-500/10":"border-dark-700"}`,children:[e.jsx(R,{className:"w-4 h-4"})," Contanti"]}),e.jsxs("button",{onClick:()=>v({...o,method:"card"}),className:`flex-1 p-2 rounded-lg border flex items-center justify-center gap-2 ${o.method==="card"?"border-primary-500 bg-primary-500/10":"border-dark-700"}`,children:[e.jsx(O,{className:"w-4 h-4"})," Carta"]})]}),e.jsx("button",{onClick:Me,className:"btn-primary w-full",children:"Aggiungi Pagamento"})]}),e.jsx("button",{onClick:()=>_(!1),className:"btn-secondary w-full",children:"Chiudi"})]})})]})}export{us as Tables};

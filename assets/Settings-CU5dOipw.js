import{d as c,r as n,n as _,s as i,j as e,w as r,h as C,T as E,aF as M,aG as z}from"./index-DEue86Wd.js";import{M as L}from"./Modal-Cseynxa5.js";import{D as I}from"./dollar-sign-CVP71d_T.js";import{G as V}from"./globe-Bp1souK8.js";const A=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],R=c("database",A);const $=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],j=c("download",$);const D=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],b=c("external-link",D);const O=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],T=c("save",O);const U=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],F=c("store",U);function J(){const[l,t]=n.useState(null),[g,N]=n.useState(!0),[h,m]=n.useState(!1),[v,d]=n.useState(!1);n.useEffect(()=>{f()},[]);async function f(){try{const a=await _();t(a)}catch(a){console.error("Error loading settings:",a),i("Errore nel caricamento impostazioni","error")}finally{N(!1)}}async function y(){if(l){m(!0);try{await z(l),i("Impostazioni salvate","success")}catch(a){console.error("Error saving settings:",a),i("Errore nel salvataggio","error")}finally{m(!1)}}}function k(){try{const a={};["categories","menu_items","tables","ingredients","inventory","orders","order_items","employees","work_shifts","reservations","expenses","settings"].forEach(p=>{const u=localStorage.getItem(`kebab_${p}`);u&&(a[p]=JSON.parse(u))});const w=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),x=URL.createObjectURL(w),o=document.createElement("a");o.href=x,o.download=`kebab_backup_${new Date().toISOString().split("T")[0]}.json`,o.click(),URL.revokeObjectURL(x),i("Backup esportato","success")}catch(a){console.error("Error exporting data:",a),i("Errore nell'esportazione","error")}}function S(){window.open("https://github.com/Raf-Dee/kebab-restaurant-app/blob/main/supabase-schema.sql","_blank")}return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"space-y-6 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Impostazioni"}),e.jsx("p",{className:"text-dark-400 mt-1",children:"Configura il tuo ristorante"})]}),e.jsx("button",{onClick:y,disabled:h,className:"btn-primary",children:h?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-dark-900"}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-5 h-5"}),"Salva"]})})]}),e.jsx("div",{className:`card p-4 ${r?"border-emerald-500/50":"border-amber-500/50"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${r?"bg-emerald-500/20":"bg-amber-500/20"}`,children:e.jsx(R,{className:`w-6 h-6 ${r?"text-emerald-400":"text-amber-400"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-white",children:"Database"}),r?e.jsxs("span",{className:"badge-success",children:[e.jsx(C,{className:"w-3 h-3 mr-1"}),"Supabase Connesso"]}):e.jsxs("span",{className:"badge-warning",children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),"Modalità Demo"]})]}),e.jsx("p",{className:"text-sm text-dark-400 mt-1",children:r?"I dati sono salvati nel cloud su Supabase":"I dati sono salvati localmente nel browser. Configura Supabase per il cloud."})]}),!r&&e.jsxs("button",{onClick:()=>d(!0),className:"btn-secondary",children:[e.jsx(b,{className:"w-4 h-4"}),"Configura Supabase"]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-semibold text-white",children:"Informazioni Negozio"})]}),e.jsxs("div",{className:"card-body space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Nome Negozio"}),e.jsx("input",{type:"text",value:l?.shop_name||"",onChange:a=>t(s=>s?{...s,shop_name:a.target.value}:null),className:"input",placeholder:"Nome del tuo ristorante"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Indirizzo"}),e.jsx("input",{type:"text",value:l?.address||"",onChange:a=>t(s=>s?{...s,address:a.target.value}:null),className:"input",placeholder:"Via Example 123, San Marino"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Telefono"}),e.jsx("input",{type:"tel",value:l?.phone||"",onChange:a=>t(s=>s?{...s,phone:a.target.value}:null),className:"input",placeholder:"+378 0549 123456"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Email"}),e.jsx("input",{type:"email",value:l?.email||"",onChange:a=>t(s=>s?{...s,email:a.target.value}:null),className:"input",placeholder:"info@tuoristorante.sm"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-semibold text-white",children:"Impostazioni Finanziarie"})]}),e.jsx("div",{className:"card-body space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Valuta"}),e.jsxs("select",{value:l?.currency||"€",onChange:a=>t(s=>s?{...s,currency:a.target.value}:null),className:"select",children:[e.jsx("option",{value:"€",children:"Euro (€)"}),e.jsx("option",{value:"$",children:"Dollaro ($)"}),e.jsx("option",{value:"£",children:"Sterlina (£)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Aliquota IVA (%)"}),e.jsx("input",{type:"number",value:l?.iva_rate||17,onChange:a=>t(s=>s?{...s,iva_rate:parseFloat(a.target.value)||0}:null),className:"input",placeholder:"17"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Soglia Scorte Predefinita"}),e.jsx("input",{type:"number",value:l?.default_threshold||10,onChange:a=>t(s=>s?{...s,default_threshold:parseFloat(a.target.value)||10}:null),className:"input",placeholder:"10"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-semibold text-white",children:"Lingua e Regione"})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Lingua"}),e.jsxs("select",{value:l?.language||"it",onChange:a=>t(s=>s?{...s,language:a.target.value}:null),className:"select max-w-xs",children:[e.jsx("option",{value:"it",children:"Italiano"}),e.jsx("option",{value:"en",children:"English"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-semibold text-white",children:"Backup & Ripristino"})]}),e.jsxs("div",{className:"card-body space-y-4",children:[e.jsx("p",{className:"text-dark-400",children:"Esporta tutti i dati del ristorante in un file JSON per backup o migrazione."}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:k,className:"btn-secondary",children:[e.jsx(j,{className:"w-5 h-5"}),"Esporta Backup (JSON)"]})})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-semibold text-white",children:"Informazioni"})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"p-4 bg-dark-900 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-primary-400",children:"2.0"}),e.jsx("p",{className:"text-sm text-dark-400",children:"Versione"})]}),e.jsxs("div",{className:"p-4 bg-dark-900 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-400",children:"React"}),e.jsx("p",{className:"text-sm text-dark-400",children:"Frontend"})]}),e.jsxs("div",{className:"p-4 bg-dark-900 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:"Supabase"}),e.jsx("p",{className:"text-sm text-dark-400",children:"Database"})]}),e.jsxs("div",{className:"p-4 bg-dark-900 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-400",children:"TypeScript"}),e.jsx("p",{className:"text-sm text-dark-400",children:"Linguaggio"})]})]})})]}),e.jsx(L,{isOpen:v,onClose:()=>d(!1),title:"Configura Supabase",size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-400 mb-2",children:"Come configurare Supabase:"}),e.jsxs("ol",{className:"text-sm text-dark-300 space-y-2 list-decimal list-inside",children:[e.jsxs("li",{children:["Vai su ",e.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:"supabase.com"})," e crea un account gratuito"]}),e.jsx("li",{children:"Crea un nuovo progetto"}),e.jsxs("li",{children:["Vai su ",e.jsx("strong",{children:"SQL Editor"})," e incolla lo schema SQL"]}),e.jsxs("li",{children:["Vai su ",e.jsx("strong",{children:"Settings → API"})," e copia URL e anon key"]}),e.jsxs("li",{children:["Crea un file ",e.jsx("code",{className:"bg-dark-700 px-1 rounded",children:".env"})," nella root del progetto con:",e.jsx("pre",{className:"mt-2 p-2 bg-dark-900 rounded text-xs overflow-x-auto",children:`VITE_SUPABASE_URL=your-project-url
VITE_SUPABASE_ANON_KEY=your-anon-key`})]}),e.jsx("li",{children:"Riavvia l'applicazione"})]})]}),e.jsxs("div",{className:"bg-dark-900 rounded-xl p-4",children:[e.jsxs("p",{className:"text-dark-300 mb-3",children:["Lo schema SQL completo si trova nel file ",e.jsx("code",{className:"bg-dark-700 px-1 rounded",children:"supabase-schema.sql"})," nella root del progetto."]}),e.jsxs("button",{onClick:S,className:"btn-secondary w-full",children:[e.jsx(b,{className:"w-4 h-4"}),"Apri Schema SQL su GitHub"]})]}),e.jsx("button",{onClick:()=>d(!1),className:"btn-primary w-full",children:"Ho capito"})]})})]})}export{J as Settings};
